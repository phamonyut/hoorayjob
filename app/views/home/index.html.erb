<% content_for :head do %>
	<script type="text/javascript">
		var allJobTypeCheckbox;
		$(document).ready(function() {
		  $('div.demo-show:eq(0)> div').hide();  
		  $('div.demo-show:eq(0)> h4').click(function() {
		    $(this).next().slideToggle('fast');
		  });
	  		allJobTypeCheckbox  = $(this).find('.options input');
			allJobTypeCheckbox.each( checkboxChange );

			// Set Click handling on post bubble as same as clicking its link
			setPostClickHandling();
		});
		!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");

		function checkboxChange() {
			var jobTypeCheckBox = $(this);
			jobTypeCheckBox.on('change', function() {
				switch( jobTypeCheckBox.attr('id') ) {
					case 'post-all' :
						if( jobTypeCheckBox.prop('checked')) {
							allJobTypeCheckbox.each( function() { 
								$(this).prop('checked', true );
							});	
						}					
					default : 
						if( !jobTypeCheckBox.prop('checked') ){
							allJobTypeCheckbox.first().prop('checked', false );
						}
				}	
			});
		}

		function setPostClickHandling() {
			$("div.post-text").click( function() {
				var link = $(this).children("a.post-title");
				if(link && link.length > 0) {
					link[0].click();
				}
			});
		}

		function filterPost(type) {
			if (type == 'employee') {
				$('.employer').hide();
				$('.employee').show();
			} else if (type == 'employer') {
				$('.employee').hide();
				$('.employer').show();
			} else {
				$('.employee').show();
				$('.employer').show();
			}
		}

	</script>
<% end %>

<% if user_signed_in? %>
	<% content_for :header do %>
		<div class="align-center">
			<%= link_to "ประกาศหาคน / หางาน", jobpost_path, class: "button btn-post" %>
		</div>
	<% end %>
<% end %>

<div class="post-filter">
	<h2>เลือกประเภทงาน</h2>
	<div class="options">
		<div>
			<input id="post-all" type="checkbox">
			<label for="post-all"></label>
			<label for="post-all">ทั้งหมด</label>
			<!-- <span class="small">ทั้งหมด</span> -->
		</div>
		<div>
			<input id="post-maid" type="checkbox">
			<label for="post-maid"></label>
			<label for="post-maid">แม่บ้าน/พ่อบ้าน</label>
		</div>
		<div>
			<input id="post-helper" type="checkbox">
			<label for="post-helper"></label>
			<label for="post-helper">พี่เลี้ยงเด็ก-คนชรา</label>
		</div>
		<div>
			<input id="post-shop" type="checkbox">
			<label for="post-shop"></label>
			<label for="post-shop">พนักงานประจำร้าน</label>
		</div>
		<div>
			<input id="post-else" type="checkbox">
			<label for="post-else"></label>
			<label for="post-else">อื่นๆ</label>
		</div>
		<button class="btn-search">ค้นหา</button>
	</div>
</div>
<div id="post-container"><!--  style="height: 525px;"> -->
	<div id="post-category">
		<div id="post-category-group">
			<div id="category-selection" class="all"></div>
			<a id="category-left" class="active" href="#" onclick="filterPost('all')">แสดงประกาศทั้งหมด</a>
			<a id="category-right" href="#" onclick="filterPost('employee')">เฉพาะคนที่กำลังหางาน</a>
			<center>
				<a id="category-center" href="#" onclick="filterPost('employer')">เฉพาะงานจากนายจ้าง</a>
			</center>
			<div id="category-selection-bar" class="all"></div>
		</div>
	</div>

	<div id="post-contents">
		<%= ยังไม่มีงาน if @posts.empty? %>
		<% @posts.each do |post| %>
			<!-- employee post -->
			<% if post.instance_of?(EmployeePost) %>
				<div class="post-post employee">
					<div class="post-contact">
						<i class="post-icon employee-man"></i>
						<div class="post-contact-info">
							<span class="post-contact-name">คุณ <%= post.user.first_name %> <%= post.user.last_name %> </span>
							<% unless post.user.phone.nil?  %>
								<span class="post-contact-tel"><i class="phone"></i><%= post.user.phone %></span>
							<% end %>
						</div>
						<div class="post-money-area">
							<div class="wage"></div>
							<div class="detail"><%= post.job.job_name %></div>
						</div>
					</div>
					<div class="post-text">
						<div class="speech-bubble"></div>
						<a href="#" class="post-title">
							<%= post.title %> ย่าน<%= post.district.name %> จังหวัด<%= post.province.name %> 
							<% unless post.min_salary.nil? %>
								ต้องการรายได้ <%= post.min_salary %> <%= "- #{post.max_salary}" if post.max_salary %> บาทต่อ<%= post.pay_period %>
							<% end %>
							<% if post.year_of_experience.nil? %>
								ยังไม่มีประสบการณ์
							<% else %>
								มีประสบการณ์ <%= post.year_of_experience %> ปี
							<% end %>
						</a>
						<div class="post-date"><%= time_ago_in_words(post.created_at) %></div>
					</div>
				</div>
			<!-- employer post -->
			<% else %>
				<div class="post-post employer">
					<div class="post-contact">
						<i class="post-icon money"></i>
						<div class="post-contact-info">
							<span class="post-contact-name">คุณ <%= post.user.first_name %> <%= post.user.last_name %> </span>
							<span class="post-contact-tel"><i class="phone"></i><%= post.user.phone %></span>
						</div>
						<div class="post-money-area">
							<div class="wage"><%= post.max_salary %></div>
							<div class="detail"> <%= post.pay_period %> </div>
						</div>
					</div>
					<div class="post-text">
						<div class="speech-bubble"></div>
						<a href="#" class="post-title">
							<%= post.title %> หาพนักงาน <%= post.job.job_name %> ย่าน<%= post.district.name %> จังหวัด<%= post.province.name %> 
							<% unless post.min_salary.nil? %>
								รายได้ <%= post.min_salary %> <%= "- #{post.max_salary}" if post.max_salary %> บาทต่อ<%= post.pay_period %>
							<% end %>
							<% if post.year_of_experience.nil? %>
								ไม่จำเป็นต้องมีประสบการณ์
							<% else %>
								มีประสบการณ์ <%= post.year_of_experience %> ปี
							<% end %>
							<% if post.sex.nil? %>
								ไม่ระบุเพศ
							<% else %>
								ต้องการเฉพาะ	 <%= post.sex.name %> เท่านั้น
							<% end %>
						</a>
						<div class="post-date"><%= time_ago_in_words(post.created_at) %></div>
					</div>
				</div>
			<% end %>
		<% end %>
	</div>

	<!-- <div id="post-contents">

		<div class="post-post">
			<div class="post-contact">
				<i class="post-icon money"></i>
				<div class="post-contact-info">
					<span class="post-contact-name">คุณ เก่ง ชัยชาญ</span>
					<span class="post-contact-tel"><i class="phone"></i>080-123-4567</span>
				</div>
				<div class="post-money-area">
					<div class="wage">1,000,000</div>
					<div class="detail">บาทต่อเดือน</div>
				</div>
			</div>
			<div class="post-text">
					<div class="speech-bubble"></div>
					<a href="#" class="post-title" onclick="console.log('a')">หาพนักงานทำความสะอาดบ้าน ย่านสุขุมวิท ต้องการไปกลับ รายได้ดี ไม่จำเป็นต้องมีประสบการณ์ ต้องการเฉพาะผู้หญิงเท่านั้น หาพนักงานทำความสะอาดบ้าน ย่านสุขุมวิท ต้องการไปกลับ รายได้ดี ไม่จำเป็นต้องมีประสบการณ์</a>
			<div class="post-date">2 วันที่แล้ว</div></div>
		</div>

		<div class="post-post employee">
			<div class="post-contact">
				<i class="post-icon employee-man"></i>
				<div class="post-contact-info">
					<span class="post-contact-name">คุณ เก่ง ชัยชาญ</span>
					<span class="post-contact-tel"><i class="phone"></i>080-123-4567</span>
				</div>
				<div class="post-money-area">
					<div class="wage"></div>
					<div class="detail">พนักงานขับรถ</div>
				</div>
			</div>
			<div class="post-text">
					<div class="speech-bubble"></div>
					<a href="#" class="post-title" onclick="console.log('b')">หาพนักงานทำความสะอาดบ้าน ย่านสุขุมวิท ต้องการไปกลับ รายได้ดี ไม่จำเป็นต้องมีประสบการณ์ ต้องการเฉพาะผู้หญิงเท่านั้น หาพนักงานทำความสะอาดบ้าน ย่านสุขุมวิท ต้องการไปกลับ รายได้ดี ไม่จำเป็นต้องมีประสบการณ์</a>
					
			<div class="post-date">2 วันที่แล้ว</div></div>
		</div>

		<div class="post-post employee">
			<div class="post-contact">
				<i class="post-icon employee-woman"></i>
				<div class="post-contact-info">
					<span class="post-contact-name">คุณ เก่ง ชัยชาญ</span>
					<span class="post-contact-tel"><i class="phone"></i>080-123-4567</span>
				</div>
				<div class="post-money-area">
					<div class="wage"></div>
					<div class="detail">แม่บ้าน</div>
				</div>
			</div>
			<div class="post-text">
					<div class="speech-bubble"></div>
					<a href="#" class="post-title">หาพนักงานทำความสะอาดบ้าน</a>
					
			<div class="post-date">2 วันที่แล้ว</div></div>
		</div>

		<div class="post-post employee">
			<div class="post-contact">
				<i class="post-icon employee-unisex"></i>
				<div class="post-contact-info">
					<span class="post-contact-name">คุณ เก่ง ชัยชาญ</span>
					<span class="post-contact-tel"><i class="phone"></i>080-123-4567</span>
				</div>
				<div class="post-money-area">
					<div class="wage"></div>
					<div class="detail">แม่บ้าน</div>
				</div>
			</div>
			<div class="post-text">
					<div class="speech-bubble"></div>
					<a href="#" class="post-title">หาพนักงานทำความสะอาดบ้าน หาพนักงานทำความสะอาดบ้าน หาพนักงานทำความสะอาดบ้าน</a>
					
			<div class="post-date">2 วันที่แล้ว</div></div>
		</div>

		<div class="post-post">
			<div class="post-contact">
				<i class="post-icon money"></i>
				<div class="post-contact-info">
					<span class="post-contact-name">คุณ เก่ง ชัยชาญ</span>
					<span class="post-contact-tel"><i class="phone"></i>080-123-4567</span>
				</div>
				<div class="post-money-area">
					<div class="wage">1,000,000</div>
					<div class="detail">บาทต่อเดือน</div>
				</div>
			</div>
			<div class="post-text">
					<div class="speech-bubble"></div>
					<a href="#" class="post-title">หาพนักงานทำความสะอาดบ้าน</a>
					
			<div class="post-date">2 วันที่แล้ว</div></div>
		</div>
	</div> -->


</div>